<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Produto Gemini</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #eef2f3;
            margin: 0;
            padding: 0;
        }

        #app {
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        button {
            padding: 8px 10px; 
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 0 5px; 
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        #symbols-list {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .symbol-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            background-color: #e7f3ff;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center; 
            justify-content: space-between; 
        }

        .symbol-item:hover {
            background-color: #d4ebff;
        }

        .ticker-info {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f1f1f1;
            font-family: monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div id="app">
        <h1>Dados de Criptomoedas Gemini</h1>
        <button id="load-symbols">Carregar moedas</button>
        <div id="symbols-list"></div>
    </div>
    <script>
        document.getElementById('load-symbols').addEventListener('click', async function () {
            const response = await fetch('https://localhost:44380/api/gemini/symbols');
            const symbols = await response.json();
            
            const symbolsList = document.getElementById('symbols-list');
            symbolsList.innerHTML = '';
            
            symbols.forEach(symbol => {
                const symbolItem = document.createElement('div');
                symbolItem.textContent = symbol;
                symbolItem.className = 'symbol-item';

                const detailsButton = document.createElement('button');
                detailsButton.textContent = 'Ver Detalhes';
                detailsButton.addEventListener('click', async (e) => {
                    await Details(symbol, symbolItem);
                });

                const tickerButton = document.createElement('button');
                tickerButton.textContent = 'Ver Marcador';
                tickerButton.addEventListener('click', async (e) => {
                    await Ticker(symbol, symbolItem);
                });

                const buyOrderButton = document.createElement('button');
                buyOrderButton.textContent = 'Ordens de Compras';
                buyOrderButton.addEventListener('click', async (e) => {
                    await Book(symbol, true, symbolItem);
                });

                const sellOrderButton = document.createElement('button');
                sellOrderButton.textContent = 'Ordens de Vendas';
                sellOrderButton.addEventListener('click', async (e) => {
                    await Book(symbol, false, symbolItem);
                });

                symbolItem.appendChild(detailsButton);
                symbolItem.appendChild(tickerButton);
                symbolItem.appendChild(buyOrderButton);
                symbolItem.appendChild(sellOrderButton);
                symbolsList.appendChild(symbolItem);
            });
        });

        async function Details(symbol, symbolItem) {
            const existingInfo = symbolItem.querySelector('.info');
            if (existingInfo) {
                existingInfo.remove();
            } else {
                const response = await fetch(`https://localhost:44380/api/gemini/details/${symbol}`);
                const detailData = await response.json();
                
                const detailInfoDiv = document.createElement('div');
                detailInfoDiv.className = 'info';
                detailInfoDiv.innerHTML = `<pre>${JSON.stringify(detailData, null, 2)}</pre>`;
                symbolItem.appendChild(detailInfoDiv);
            }
        }

        async function Ticker(symbol, symbolItem) {
            const existingInfo = symbolItem.querySelector('.info');
            if (existingInfo) {
                existingInfo.remove();
            } else {
                const response = await fetch(`https://localhost:44380/api/gemini/ticker/${symbol}`);
                const tickerData = await response.json();
                
                const tickerInfoDiv = document.createElement('div');
                tickerInfoDiv.className = 'info';
                tickerInfoDiv.innerHTML = `<pre>${JSON.stringify(tickerData, null, 2)}</pre>`;
                symbolItem.appendChild(tickerInfoDiv);
            }
        }

        async function Book(symbol, buy, symbolItem) {
            const existingInfo = symbolItem.querySelector('.info');
            if (existingInfo) {
                existingInfo.remove();
            } else {
                const response = await fetch(`https://localhost:44380/api/gemini/book/${symbol}/${buy}`);
                const orderBookData = await response.json();
                
                const orderBookInfoDiv = document.createElement('div');
                orderBookInfoDiv.className = 'info';
                orderBookInfoDiv.innerHTML = `<pre>${JSON.stringify(orderBookData, null, 2)}</pre>`;
                symbolItem.appendChild(orderBookInfoDiv);
            }
        }
    </script>
</body>
</html>